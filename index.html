<!DOCTYPE html>
<html lang="en">
<head>
	
<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KD87DSKK');</script> -->
<!-- End Google Tag Manager -->
	
     <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DTSCZD78XQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DTSCZD78XQ');
</script>
    
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

</head>
<body>

	<!-- Google Tag Manager (noscript) -->
<!-- <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KD87DSKK"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> -->
<!-- End Google Tag Manager (noscript) -->



    <h1>GA4 TEST</h1>

    <h1>ALIO</h1>

    <button onclick="redirect()" class="test1">Redirect</button>
    <button onclick="redirect2()" id="test2">Redirect_2</button>
    <button type="submit" class=" dynamic_submit_btn dcBtn">
	    <span>Download Now</span>
    </button>	
    <a href="https://www.delfi.lt/"><button>External Redirect</button></a>

	<h2>Simple Test Form</h2>
    
    <form id="testForm" action="index2.html" method="GET">
        <label for="name">Name:</label><br>
        <input type="text" id="name" name="name" required><br><br>
        
        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email" required><br><br>
        
        <button type="submit">Submit</button>
    </form>

<h2>Purchase Items</h2>
<form id="purchaseForm">
    <div id="productsContainer">
        <div class="product">
            <label for="itemName">Item Name:</label>
            <input type="text" class="itemName" name="itemName" value="Product 1" required><br><br>
            
            <label for="itemPrice">Price ($):</label>
            <input type="number" class="itemPrice" name="itemPrice" value="50" step="0.01" required><br><br>
            
            <label for="itemQuantity">Quantity:</label>
            <input type="number" class="itemQuantity" name="itemQuantity" value="1" required><br><br>

            <label for="itemDiscount">Discount ($):</label>
            <input type="number" class="itemDiscount" name="itemDiscount" value="0" step="0.01"><br><br>
        </div>
    </div>
    <button type="submit">Purchase</button>
</form>

<script>
    document.getElementById('purchaseForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent the default form submission

        // Push data to the dataLayer
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push({ ecommerce: null }); // Clear the previous ecommerce object

        // Get and convert values
        const itemName = document.querySelector('.itemName').value;
        const itemPrice = parseFloat(document.querySelector('.itemPrice').value);
        const itemQuantity = parseInt(document.querySelector('.itemQuantity').value, 10);
        const itemDiscount = parseFloat(document.querySelector('.itemDiscount').value);

        // Calculate the discounted price per unit (after discount)
        const discountedPrice = itemPrice - itemDiscount;

        // Calculate the total value
        const totalValue = discountedPrice * itemQuantity;

        // Push the purchase event to the dataLayer
        window.dataLayer.push({
            event: 'purchase',
            ecommerce: {
                currency: 'USD',
                value: totalValue.toFixed(2), // Total value of the purchase
                items: [
                    {
                        item_name: itemName,
                        price: discountedPrice.toFixed(2), // Price after discount per unit
                        quantity: itemQuantity,
                        discount: itemDiscount.toFixed(2)  // Discount per unit
                    }
                ]
            }
        });

        // Optional: Redirect after submission if needed
        // redirect(); // Uncomment this line if you want to redirect after submission
    });
</script>




	
    <script>
        function redirect() {
            window.location.href = 'index2.html';
        }
    </script>
    <script>
        function redirect2() {
            window.location.href = 'index3.html';
        }
    </script>


    
</body>

    
</html>
