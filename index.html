<!DOCTYPE html>
<html lang="en">
<head>
	
<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KD87DSKK');</script> -->
<!-- End Google Tag Manager -->
	
     <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DTSCZD78XQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DTSCZD78XQ');
</script>
    
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

</head>
<body>

	<!-- Google Tag Manager (noscript) -->
<!-- <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KD87DSKK"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> -->
<!-- End Google Tag Manager (noscript) -->



    <h1>GA4 TEST</h1>

    <h1>ALIO</h1>

    <button onclick="redirect()" class="test1">Redirect</button>
    <button onclick="redirect2()" id="test2">Redirect_2</button>
    <button type="submit" class=" dynamic_submit_btn dcBtn">
	    <span>Download Now</span>
    </button>	
    <a href="https://www.delfi.lt/"><button>External Redirect</button></a>

	<h2>Simple Test Form</h2>
    
    <form id="testForm" action="index2.html" method="GET">
        <label for="name">Name:</label><br>
        <input type="text" id="name" name="name" required><br><br>
        
        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email" required><br><br>
        
        <button type="submit">Submit</button>
    </form>

	    <h2>Purchase Item</h2>
    <form id="purchaseForm">
        <label for="itemName">Item Name:</label>
        <input type="text" id="itemName" name="itemName" value="Random Product" required><br><br>
        
        <label for="itemPrice">Price ($):</label>
        <input type="number" id="itemPrice" name="itemPrice" value="50" required><br><br>
        
        <label for="itemDiscount">Discount ($):</label>
        <input type="number" id="itemDiscount" name="itemDiscount" value="10"><br><br>
        
        <label for="itemQuantity">Quantity:</label>
        <input type="number" id="itemQuantity" name="itemQuantity" value="1" required><br><br>
        
        <button type="submit">Purchase</button>
    </form>
	
    <script>
        function redirect() {
            window.location.href = 'index2.html';
        }
    </script>
    <script>
        function redirect2() {
            window.location.href = 'index3.html';
        }
    </script>

<script>
    document.getElementById('purchaseForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const itemName = document.getElementById('itemName').value;
        const itemPrice = parseFloat(document.getElementById('itemPrice').value);
        const itemDiscount = parseFloat(document.getElementById('itemDiscount').value || 0);
        const itemQuantity = parseInt(document.getElementById('itemQuantity').value);

        // Check if itemDiscount is greater than itemPrice
        if (itemDiscount > itemPrice) {
            alert('Discount cannot be greater than the price');
            return;
        }

        const total = (itemPrice - itemDiscount) * itemQuantity;

        const purchaseData = {
            item_name: itemName,
            price: itemPrice,
            discount: itemDiscount,
            quantity: itemQuantity,
            total: total
        };

        console.log('Purchase Data:', purchaseData);

        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push({
            event: 'purchase',
            ecommerce: {
                transaction_id: Date.now().toString(),
                value: purchaseData.total,
                items: [{
                    item_name: purchaseData.item_name,
                    price: purchaseData.price,
                    discount: purchaseData.discount,  // Ensure discount is sent
                    quantity: purchaseData.quantity
                }]
            }
        });

        alert('Purchase event sent to dataLayer. Check console for details.');
    });
</script>


<script>
window.dataLayer = window.dataLayer || [];

document.addEventListener("DOMContentLoaded", function() {
    var form = document.getElementById("testForm");

    if (form) {
        form.addEventListener("submit", function(event) {
            event.preventDefault(); // Prevent form from submitting immediately

            // Push anonymized event to the dataLayer (NO PII)
            window.dataLayer.push({
                "event": "formSubmission", // Custom event name
                "formId": "testForm",       // ID of the form
                "formType": "contactForm"   // Add any non-identifiable information you need
            });

            console.log("Custom event 'formSubmission' pushed to dataLayer");

            // Submit the form after pushing the data to the dataLayer
            form.submit();
        });
    }
});
</script>



    
</body>

    
</html>
